{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Dashboard</h2>
    <div class="row text-center mb-4">
        <div class="col-md-4">
            <div class="card text-white bg-success">
                <div class="card-body">
                    <h5>Income</h5>
                    <p>₹{{ income }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-danger">
                <div class="card-body">
                    <h5>Expense</h5>
                    <p>₹{{ expense }}</p>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card text-white bg-info">
                <div class="card-body">
                    <h5>Balance</h5>
                    <p>₹{{ balance }}</p>
                </div>
            </div>
        </div>
    </div>

    <h4>Recent Transactions</h4>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Date</th><th>Type</th><th>Category</th><th>Amount</th><th>Description</th>
            </tr>
        </thead>
        <tbody>
            {% for txn in recent_transactions %}
            <tr>
                <td>{{ txn.date }}</td>
                <td>{{ txn.type }}</td>
                <td>{{ txn.category.name }}</td>
                <td>₹{{ txn.amount }}</td>
                <td>{{ txn.description }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h4>Expense by Category</h4>
    <canvas id="expenseChart" width="400" height="200"></canvas>
</div>

<!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('expenseChart').getContext('2d');
    const expenseChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: {{ labels|safe }},
            datasets: [{
                label: 'Expenses',
                data: {{ data|safe }},
                backgroundColor: ['#FF6384','#36A2EB','#FFCE56','#8E44AD','#2ECC71']
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom'
                }
            }
        }
    });
</script> -->
{% endblock %}
